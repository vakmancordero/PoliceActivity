<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{/layouts/main}">
<head>
    <title>[[#{activity.messages.list.title}]]</title>

    <th:block th:replace="fragments/datatables :: css"></th:block>

</head>
<div layout:fragment="content">

    <ol class="breadcrumb">
        <li class="breadcrumb-item">
            <a href="#">Home</a>
        </li>
        <li class="breadcrumb-item active">Activity Messages</li>
    </ol>

    <div class="row">
        <div class="col-12">
            <h1>[[#{module}]]</h1>
            <div id="page_content">
                <h4 class="mb-3">[[#{activity.messages.list.title}]]</h4>
                <div class="row">
                    <div class="col-2 mb-3">
                        <a class="btn btn-primary" th:href="@{'create'}" role="button">[[#{button.new}]] [[#{activity.messages}]]</a>
                    </div>
                </div>
                <table id="modulesTable" class="table table-striped table-bordered dt-responsive nowrap" style="width:100%">
                    <thead>
                    <tr>
                        <th></th>
                        <th scope="col">[[#{module.table.id}]]</th>
                    </tr>
                    </thead>
                    <!--<tfoot>-->
                    <!--<tr>-->
                        <!--<th></th>-->
                        <!--<th scope="col">[[#{module.table.id}]]</th>-->
                        <!--<th scope="col">[[#{module.table.name}]]</th>-->
                        <!--<th scope="col">[[#{module.table.description}]]</th>-->
                    <!--</tr>-->
                    <!--</tfoot>-->
                </table>
            </div>
        </div>
    </div>
</div>
<th:block layout:fragment="scripts">

    <th:block th:replace="fragments/datatables :: scripts"></th:block>

    <script th:inline="javascript">

        // function format(d) {
        //     // `d` is the original data object for the row
        //     return '<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">'+
        //         '<tr>'+
        //         '<td>Full name:</td>'+
        //         '<td>'+d.name+'</td>'+
        //         '</tr>'+
        //         '<tr>'+
        //         '<td>Extension number:</td>'+
        //         '<td>'+d.extn+'</td>'+
        //         '</tr>'+
        //         '<tr>'+
        //         '<td>Extra info:</td>'+
        //         '<td>And any further details here (images etc)...</td>'+
        //         '</tr>'+
        //         '</table>';
        // }

        $(function() {

            //$("#modulesTable").DataTable();

            var table = $('#modulesTable').DataTable( {
                "ajax": "/catcher/operations",
                "columns": [
                    {
                        "className":      'details-control',
                        "orderable":      false,
                        "data":           null,
                        "defaultContent": ''
                    },
                    { "data": "activityId" }
                ]
            } );

            // Add event listener for opening and closing details
            $('#modulesTable tbody').on('click', 'td.details-control', function () {
                var tr = $(this).closest('tr');
                var row = table.row( tr );

                if ( row.child.isShown() ) {
                    // This row is already open - close it
                    row.child.hide();
                    tr.removeClass('shown');
                }
                else {
                    // Open this row
                    row.child( format(row.data()) ).show();
                    tr.addClass('shown');
                }
            });

        });

    </script>

</th:block>
</html>